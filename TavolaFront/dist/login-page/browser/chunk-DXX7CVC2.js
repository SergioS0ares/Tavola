import{a as St}from"./chunk-JOAUZNXI.js";import{e as ht,f as ft,i as xt}from"./chunk-PHAKSYZK.js";import{a as vt,b as Ot,c as B}from"./chunk-TEZED4GE.js";import{d as Mt}from"./chunk-PCIBWDJF.js";import{a as Ct}from"./chunk-E2WZTPBL.js";import{a as Pt}from"./chunk-DPYQAYJ2.js";import{a as _t}from"./chunk-WI5BEHMP.js";import{e as bt,i as wt,k as D,n as yt,o as V,p as T,q}from"./chunk-Q7PZSYDJ.js";import{M as $,Q as F,R as pt,U as mt,V as M,X as gt,Z as R,da as ut,ha as Q,ia as A,k as st,l as z,m as ct,o as lt,r as E}from"./chunk-KZ2VZQWD.js";import{c as dt,d as K,f as I,h as X}from"./chunk-FHD2U5CN.js";import{$ as W,Aa as u,Ac as Y,Bc as l,Cc as S,Db as k,Dc as y,Jb as h,Ka as C,Lc as ot,Mc as G,Pc as U,Qb as it,Qc as J,Rb as c,Tb as rt,Yc as at,cc as o,dc as a,ec as b,f as Z,ha as tt,ic as w,m as H,mb as et,oc as f,pb as nt,qb as s,qc as p,u as L,vc as v,wb as _,wc as O,xc as P,y as N,za as g}from"./chunk-ZBUSQTZT.js";function Rt(r,m){if(r&1&&(o(0,"mat-option",11)(1,"mat-icon",12),l(2,"location_on"),a(),l(3),a()),r&2){let t=m.$implicit;c("value",t),s(3),y(" ",t," ")}}function Qt(r,m){if(r&1&&(o(0,"mat-option",11)(1,"mat-icon",12),l(2,"search"),a(),l(3),a()),r&2){let t=m.$implicit;c("value",t),s(3),y(" ",t," ")}}var zt=(()=>{class r{constructor(){this.citySuggestions=[],this.querySuggestions=[],this.showCityDropdown=!1,this.showQueryDropdown=!1,this.cityCtrl=new M(""),this.queryCtrl=new M(""),this.filteredCities$=L([]),this.filteredQueries$=L([]),this.search=new C,this.cityInput=new C,this.queryInput=new C,this.selectCity=new C,this.selectQuery=new C,this.cityBlur=new C}onCidadeInput(t){this.cityInput.emit(t)}onQueryInput(t){this.queryInput.emit(t)}onSelectCity(t){this.selectCity.emit(t)}onSelectQuery(t){this.selectQuery.emit(t)}onSearch(){this.search.emit()}onCityBlur(t){this.cityBlur.emit(t)}onDocumentClick(t){t.target.closest(".input-group")||(this.showCityDropdown=!1,this.showQueryDropdown=!1)}static{this.\u0275fac=function(e){return new(e||r)}}static{this.\u0275cmp=k({type:r,selectors:[["app-search-bar"]],hostBindings:function(e,n){e&1&&f("click",function(d){return n.onDocumentClick(d)},!1,nt)},inputs:{citySuggestions:"citySuggestions",querySuggestions:"querySuggestions",showCityDropdown:"showCityDropdown",showQueryDropdown:"showQueryDropdown",cityCtrl:"cityCtrl",queryCtrl:"queryCtrl",filteredCities$:"filteredCities$",filteredQueries$:"filteredQueries$"},outputs:{search:"search",cityInput:"cityInput",queryInput:"queryInput",selectCity:"selectCity",selectQuery:"selectQuery",cityBlur:"cityBlur"},decls:20,vars:11,consts:[["autoCity","matAutocomplete"],["autoQuery","matAutocomplete"],["autocomplete","off",1,"search-bar",3,"ngSubmit"],["id","searchBarHome",1,"input-group"],["appearance","outline",1,"custom-field","location"],["matPrefix","",1,"icon","brown"],["matInput","","placeholder","Cidade","required","",1,"brown-text","city-input",3,"formControl","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline",1,"custom-field","query"],["matInput","","placeholder","Nome do restaurante...",1,"brown-text","long-query",3,"formControl","matAutocomplete"],["type","submit",1,"search-btn"],[3,"value"],[1,"icon","brown"]],template:function(e,n){if(e&1){let i=w();o(0,"form",2),f("ngSubmit",function(){return g(i),u(n.onSearch())}),o(1,"div",3)(2,"mat-form-field",4)(3,"mat-icon",5),l(4,"location_on"),a(),b(5,"input",6),o(6,"mat-autocomplete",null,0),h(8,Rt,4,2,"mat-option",7),U(9,"async"),a()(),o(10,"mat-form-field",8)(11,"mat-icon",5),l(12,"search"),a(),b(13,"input",9),o(14,"mat-autocomplete",null,1),h(16,Qt,4,2,"mat-option",7),U(17,"async"),a()(),o(18,"button",10),l(19," PROCURAR "),a()()()}if(e&2){let i=Y(7),d=Y(15);c("@searchBarAnim",void 0),s(5),c("formControl",n.cityCtrl)("matAutocomplete",i),s(3),c("ngForOf",J(9,7,n.filteredCities$)),s(5),c("formControl",n.queryCtrl)("matAutocomplete",d),s(3),c("ngForOf",J(17,9,n.filteredQueries$))}},dependencies:[E,z,lt,D,wt,bt,V,yt,q,T,Q,gt,$,F,pt,ut,mt,A,R,B,vt,Mt,Ot],styles:[".banner[_ngcontent-%COMP%]{background:#f6bd38;border-radius:32px;margin:48px auto;max-width:96vw;min-height:420px;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 24px #00000012;overflow:hidden}.banner-content[_ngcontent-%COMP%]{width:100%;max-width:1200px;margin:0 auto}.banner-row[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:center;position:relative;gap:0}.banner-left[_ngcontent-%COMP%]{flex:1 1 0;display:flex;flex-direction:column;align-items:flex-start;justify-content:center;z-index:2;margin-top:60px;margin-left:0;margin-right:0;max-width:65%}.banner[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:2.8rem;font-weight:800;margin-bottom:38px;line-height:1.2;text-align:left;max-width:95%;margin-right:32px;word-break:break-word}.search-bar[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;width:100%}.input-group[_ngcontent-%COMP%]{display:flex;background:#fff;border-radius:15px;box-shadow:0 2px 8px #00000014;align-items:stretch;width:700px;max-width:100vw;min-width:320px;margin:0 auto;padding:0;height:56px;justify-content:space-between;gap:8px;transition:box-shadow .3s,transform .3s}.custom-field[_ngcontent-%COMP%]{flex:1 1 0;min-width:120px;max-width:220px;margin-right:8px;background:none;border:none;box-shadow:none;padding:0;display:flex;align-items:center;border-radius:0;height:100%}.custom-field[_ngcontent-%COMP%]:last-child{margin-right:0}.mat-form-field[_ngcontent-%COMP%]{width:100%;background:none}.mat-form-field-appearance-outline[_ngcontent-%COMP%]   .mat-form-field-outline[_ngcontent-%COMP%]{color:#eee}.mat-mdc-form-field[_ngcontent-%COMP%]   .mat-mdc-input-element[_ngcontent-%COMP%], .mat-mdc-form-field[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%], .mat-form-field[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{color:#3b221b!important}input[_ngcontent-%COMP%], .mat-input-element[_ngcontent-%COMP%], .mat-form-field-input[_ngcontent-%COMP%]{color:#3b221b!important;background:transparent!important;font-style:italic}input[_ngcontent-%COMP%]::placeholder, .mat-input-element[_ngcontent-%COMP%]::placeholder, .mat-form-field-input[_ngcontent-%COMP%]::placeholder{color:#3b221b!important;opacity:.7;font-style:italic}.search-btn[_ngcontent-%COMP%]{background:#f6bd38;color:#222;font-weight:800;border:none;border-radius:15px;padding:0 22px;height:44px;margin-left:12px;margin-right:4px;font-size:1.05rem;box-shadow:0 2px 8px #0000001a;transition:background .2s,color .2s;cursor:pointer;outline:none;min-width:110px;display:flex;align-items:center;justify-content:center;align-self:center}.search-btn[_ngcontent-%COMP%]:hover, .search-btn[_ngcontent-%COMP%]:focus{background:#ffe08a;color:#222}.city-dropdown-absolute[_ngcontent-%COMP%]{position:absolute;left:50%;top:100px;transform:translate(-50%);width:340px;z-index:100;margin-left:0}.dropdown[_ngcontent-%COMP%]{background:#fff;box-shadow:0 4px 16px #0000001a;border-radius:0 0 14px 14px;z-index:20;max-height:260px;overflow-y:auto;margin-top:2px;position:absolute;left:0;width:100%}.city-dropdown[_ngcontent-%COMP%]{padding:12px 0 8px;min-width:320px;box-shadow:0 8px 32px #00000021;border-radius:0 0 14px 14px}.dropdown-city-search[_ngcontent-%COMP%]{width:90%;margin:0 5% 10px;padding:10px 12px;border-radius:8px;border:1px solid #eee;font-size:1rem;color:#3b221b;background:#fafafa}.dropdown-title[_ngcontent-%COMP%]{font-size:.98rem;font-weight:600;color:#3b221b;padding:8px 18px 4px;opacity:.7}.highlight[_ngcontent-%COMP%]{background:#f6f6f6;font-weight:600;border-radius:8px;margin:0 8px 8px;padding:12px 18px!important;display:flex;align-items:center;gap:8px}.dropdown-item[_ngcontent-%COMP%]{padding:14px 18px;cursor:pointer;color:#3b221b;font-size:1rem;border-bottom:1px solid #f6f6f6;transition:background .15s,color .15s;display:flex;align-items:center;gap:8px;border-radius:6px}.dropdown-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.dropdown-item[_ngcontent-%COMP%]:hover{background:#f6bd38;color:#3b221b;font-weight:700}.banner-right[_ngcontent-%COMP%]{flex:0 0 420px;display:flex;align-items:center;justify-content:flex-end;height:100%;position:absolute;right:-18%;top:50%;transform:translateY(-50%);z-index:1;overflow:visible}.pizza-img[_ngcontent-%COMP%]{max-width:420px;max-height:420px;width:100%;height:auto;object-fit:contain;filter:drop-shadow(0 4px 16px rgba(0,0,0,.1));overflow:visible;transition:none!important;will-change:auto}@media (max-width: 1100px){.banner-row[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.banner-right[_ngcontent-%COMP%]{position:static;right:0;top:0;transform:none;margin-top:32px;justify-content:center}.pizza-img[_ngcontent-%COMP%]{margin-left:0;max-width:220px}.banner-left[_ngcontent-%COMP%]{margin-left:0;margin-top:32px;align-items:center;margin-right:0;max-width:100%}.input-group[_ngcontent-%COMP%]{width:98vw;max-width:98vw}.city-dropdown-absolute[_ngcontent-%COMP%]{position:static;margin-left:0;width:98vw;left:0;transform:none}}@media (max-width: 700px){.banner-content[_ngcontent-%COMP%]{max-width:98vw}.banner-row[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.banner-left[_ngcontent-%COMP%]{align-items:center;margin-left:0;margin-right:0;max-width:100%}.input-group[_ngcontent-%COMP%]{flex-direction:column;gap:8px;width:98vw;max-width:98vw}.custom-field[_ngcontent-%COMP%]{min-width:100%;max-width:100%;margin-right:0}.search-btn[_ngcontent-%COMP%]{margin-top:8px;height:48px}.pizza-img[_ngcontent-%COMP%]{max-width:180px}.banner[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem;text-align:center;margin-right:0}}.results-grid[_ngcontent-%COMP%]{margin-top:24px;display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:24px}.rest-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #00000012;padding:16px;transition:transform .2s;cursor:pointer}.rest-card[_ngcontent-%COMP%]:hover{transform:scale(1.03)}.rest-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;border-radius:8px}.rest-card[_ngcontent-%COMP%]   .tipo[_ngcontent-%COMP%]{font-size:13px;color:#da4a24;font-weight:600;margin-bottom:4px}.rest-card[_ngcontent-%COMP%]   .nome[_ngcontent-%COMP%]{font-size:18px;font-weight:700;margin-bottom:8px}.restaurants-section[_ngcontent-%COMP%]{margin:48px auto 0;max-width:1200px;padding:0 24px}.restaurants-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#3b221b;margin-bottom:24px}.restaurants-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:32px}.restaurant-info[_ngcontent-%COMP%]{padding:18px 18px 14px;display:flex;flex-direction:column;gap:6px}.restaurant-type[_ngcontent-%COMP%]{font-size:.95rem;color:#da4a24;font-weight:600;margin-bottom:2px}.restaurant-name[_ngcontent-%COMP%]{font-size:1.18rem;font-weight:700;color:#3b221b;margin-bottom:6px}.restaurant-rating[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.star.filled[_ngcontent-%COMP%]{color:#f6bd38}.rate-number[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#3b221b;margin-left:6px}@media (max-width: 900px){.restaurants-section[_ngcontent-%COMP%]{padding:0 8px}.restaurants-grid[_ngcontent-%COMP%]{gap:18px}}.mat-icon[_ngcontent-%COMP%]{color:#3b221b!important;margin-right:8px}.mat-autocomplete-panel[_ngcontent-%COMP%], .mat-autocomplete-panel[_ngcontent-%COMP%]   .mat-option[_ngcontent-%COMP%]{color:#3b221b!important}.mat-autocomplete-panel[_ngcontent-%COMP%]   .mat-option[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#3b221b!important;margin-right:8px}"],data:{animation:[dt("searchBarAnim",[X(":enter",[I({opacity:0,transform:"translateY(-24px)"}),K("250ms cubic-bezier(.4,0,.2,1)",I({opacity:1,transform:"none"}))]),X(":leave",[K("200ms cubic-bezier(.4,0,.2,1)",I({opacity:0,transform:"translateY(-24px)"}))])])]},changeDetection:0})}}return r})();var Et=(()=>{class r{constructor(){this._sticky=new H(!1),this.sticky$=this._sticky.asObservable(),this._sidebarAberta=new H(!0),this.sidebarAberta$=this._sidebarAberta.asObservable()}setSticky(t){this._sticky.next(t)}setSidebarAberta(t){this._sidebarAberta.next(t)}static{this.\u0275fac=function(e){return new(e||r)}}static{this.\u0275prov=tt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var Dt=["searchBarHome"],Vt=["banner"],Tt=["searchSentinel"],qt=["scrollContainer"],Bt=r=>["/home","agendamento-reservas-restaurante",r],jt=()=>[1,2,3,4,5],Ht=r=>({filled:r});function Lt(r,m){if(r&1){let t=w();o(0,"app-search-bar",15,2),f("search",function(){g(t);let n=p();return u(n.onSearch())})("cityInput",function(n){g(t);let i=p();return u(i.onCityInput(n))})("selectCity",function(n){g(t);let i=p();return u(i.selectCity(n))})("selectQuery",function(n){g(t);let i=p();return u(i.selectQuery(n))})("cityBlur",function(n){g(t);let i=p();return u(i.onCityBlur(n))}),a()}if(r&2){let t=p();c("citySuggestions",t.filteredCitySuggestions)("querySuggestions",t.querySuggestions)("showCityDropdown",t.showCityDropdown)("showQueryDropdown",t.showQueryDropdown)("cityCtrl",t.cityCtrl)("queryCtrl",t.queryCtrl)("filteredCities$",t.filteredCities$)("filteredQueries$",t.filteredQueries$)}}function Nt(r,m){if(r&1){let t=w();o(0,"div",23),f("mousedown",function(){let n=g(t).$implicit,i=p(2);return u(i.selectCity(n))}),o(1,"mat-icon",20),l(2,"location_on"),a(),l(3),a()}if(r&2){let t=m.$implicit;s(3),y(" ",t," ")}}function Wt(r,m){if(r&1){let t=w();o(0,"div",16)(1,"div",17)(2,"input",18),f("input",function(n){g(t);let i=p();return u(i.onCityInput(n))}),a(),o(3,"div",19),f("mousedown",function(){g(t);let n=p();return u(n.selectCity("Perto de mim"))}),o(4,"mat-icon",20),l(5,"send"),a(),l(6," Perto de mim "),a(),o(7,"div",21),l(8,"Sugest\xF5es"),a(),h(9,Nt,4,1,"div",22),a()()}if(r&2){let t=p();s(2),c("formControl",t.cityCtrl),s(7),c("ngForOf",t.filteredCitySuggestions)}}function Yt(r,m){if(r&1&&(o(0,"mat-icon",40),l(1,"star"),a()),r&2){let t=m.$implicit,e=p().$implicit,n=p(2);c("ngClass",G(1,Ht,t<=n.getStarCount(e)))}}function Gt(r,m){if(r&1&&(o(0,"span",41),l(1),a()),r&2){let t=p().$implicit,e=p(2);s(),y("(",e.getTotalAvaliacoes(t)," avalia\xE7\xF5es)")}}function Ut(r,m){if(r&1&&(o(0,"div",31),b(1,"img",32),o(2,"div",33)(3,"div",34),l(4),a(),o(5,"div",35),l(6),a(),o(7,"div",36),h(8,Yt,2,3,"mat-icon",37),o(9,"span",38),l(10),a(),h(11,Gt,2,1,"span",39),a()()()),r&2){let t=m.$implicit,e=p(2);c("routerLink",G(8,Bt,t.id)),s(),c("src",e.getImagemRestaurante(t),et)("alt",t.nome),s(3),S(e.getEnderecoFormatado(t)),s(2),S(t.nome),s(2),c("ngForOf",ot(10,jt)),s(2),S(t.mediaAvaliacao),s(),c("ngIf",e.getTotalAvaliacoes(t)>0)}}function Jt(r,m){if(r&1){let t=w();o(0,"div",24)(1,"div",25)(2,"h2"),l(3),a(),o(4,"div",26)(5,"button",27),f("click",function(){let n=g(t).$implicit,i=p();return u(i.scrollRestaurants(n,"left"))}),o(6,"mat-icon"),l(7,"chevron_left"),a()(),o(8,"button",27),f("click",function(){let n=g(t).$implicit,i=p();return u(i.scrollRestaurants(n,"right"))}),o(9,"mat-icon"),l(10,"chevron_right"),a()()()(),o(11,"div",28,3),f("scroll",function(n){let i=g(t).$implicit,d=p();return u(d.onRestaurantScroll(n,i))}),o(13,"div",29),h(14,Ut,12,11,"div",30),a()()()}if(r&2){let t=m.$implicit,e=p();s(3),S(t),s(2),c("disabled",!e.canScrollLeft(t)),s(3),c("disabled",!e.canScrollRight(t)),s(3),it("data-cuisine",t),s(3),c("ngForOf",e.groupedRestaurants[t])}}var Ee=(()=>{class r{constructor(t,e,n,i,d,x,j){this.stickyService=t,this.cdr=e,this.restauranteService=n,this.mapsService=i,this.router=d,this.spinnerService=x,this.toastr=j,this.cityCtrl=new M(""),this.queryCtrl=new M(""),this.todasCidades=[],this.todasCozinhas=[],this.filteredCitySuggestions=[],this.querySuggestions=[],this.showCityDropdown=!1,this.showQueryDropdown=!1,this.restaurants=[],this.groupedRestaurants={},this.stickySearch=!1,this.isSidebarOpen=!0,this.scrollStates={}}ngOnInit(){this.filteredCitySuggestions=[],this.querySuggestions=[],this.restauranteService.allCities$.subscribe(e=>{this.todasCidades=e,this.filteredCitySuggestions=[...this.todasCidades]}),this.restauranteService.allCuisines$.subscribe(e=>{let n=["Ver todos os restaurantes","Melhor avaliado"];this.todasCozinhas=Array.from(new Set([...e,...n])).sort(),this.querySuggestions=[...this.todasCozinhas]}),this.filteredCities$=this.cityCtrl.valueChanges.pipe(W(this.cityCtrl.value??""),N(e=>this._filter(e??"",this.todasCidades))),this.filteredQueries$=this.queryCtrl.valueChanges.pipe(W(""),N(e=>this._filter(e??"",this.todasCozinhas))),this.spinnerService.mostrar(),this.restauranteService.getRestaurantes().subscribe({next:e=>{let n=(e||[]).map(i=>Z(this,null,function*(){if(!i.coordenadas){let d=`${i.endereco.rua}, ${i.endereco.numero}, ${i.endereco.bairro}, ${i.endereco.cidade} - ${i.endereco.estado}, ${i.endereco.cep}`;try{let x=yield this.mapsService.getCoordinatesFromAddress(d).toPromise();x&&(i.coordenadas={latitude:x.lat,longitude:x.lng})}catch{}}return i}));Promise.all(n).then(i=>{this.setRestaurants(i),this.spinnerService.ocultar()})},error:e=>{this.spinnerService.ocultar()}});let t=this.getCuisineTypes();Array.isArray(t)&&t.forEach(e=>{this.scrollStates[e]={canScrollLeft:!1,canScrollRight:!1}}),this.sidebarSubscription=this.stickyService.sidebarAberta$.subscribe(e=>{this.isSidebarOpen=e,this.scrollContainers.forEach(n=>{let i=n.nativeElement.dataset.cuisine;i&&this.checkScrollArrows(n.nativeElement,i)}),this.cdr.detectChanges()}),setTimeout(()=>{this.searchSentinel&&this.initStickyObserver(this.searchSentinel.nativeElement)},0)}ngAfterViewInit(){this.scrollContainers&&(this.scrollContainers.changes.subscribe(t=>{t.forEach(e=>{let n=e.nativeElement.dataset.cuisine;n&&!e.nativeElement._hasScrollListener&&(e.nativeElement.addEventListener("scroll",i=>this.onRestaurantScroll(i,n)),e.nativeElement._hasScrollListener=!0),this.checkScrollArrows(e.nativeElement,n||"default")}),this.cdr.detectChanges()}),setTimeout(()=>{this.scrollContainers.forEach(t=>{let e=t.nativeElement.dataset.cuisine;e&&this.checkScrollArrows(t.nativeElement,e)}),this.cdr.detectChanges()},0))}ngOnDestroy(){this.sidebarSubscription&&this.sidebarSubscription.unsubscribe(),this.scrollContainers.forEach(t=>{t.nativeElement._hasScrollListener&&(t.nativeElement.removeEventListener("scroll",e=>this.onRestaurantScroll(e,"")),t.nativeElement._hasScrollListener=!1)})}initStickyObserver(t){new IntersectionObserver(n=>{this.stickySearch=!n[0].isIntersecting,this.stickyService.setSticky(this.stickySearch),this.cdr.detectChanges()},{threshold:[0,1]}).observe(t)}_filter(t,e){let n=t.toLowerCase();return e.filter(i=>i.toLowerCase().includes(n))}onSearch(){this.spinnerService.mostrar(),this.restaurants=[],this.groupedRestaurants={};let t=this.cityCtrl.value?.trim(),e=this.queryCtrl.value?.trim();t&&e?this.restauranteService.getRestaurantesPorCidade(t).subscribe({next:n=>{let i=n.filter(d=>d.nome.toLowerCase().includes(e.toLowerCase())||d.tipoCozinha&&d.tipoCozinha.toLowerCase().includes(e.toLowerCase()));this.setRestaurants(i),this.spinnerService.ocultar()},error:n=>{this.toastr.error("Erro ao buscar restaurantes por cidade."),console.error(n),this.spinnerService.ocultar()}}):t?this.restauranteService.getRestaurantesPorCidade(t).subscribe({next:n=>{this.setRestaurants(n),this.spinnerService.ocultar()},error:n=>{this.toastr.error("Erro ao buscar restaurantes por cidade."),console.error(n),this.spinnerService.ocultar()}}):e?this.restauranteService.getPesquisarRestaurantes(e,0,10).subscribe({next:n=>{this.setRestaurants(n.content||[]),this.spinnerService.ocultar()},error:n=>{this.toastr.error("Erro ao pesquisar restaurantes."),console.error(n),this.spinnerService.ocultar()}}):(this.restauranteService.getRestaurantes().subscribe({next:n=>{this.setRestaurants(n),this.spinnerService.ocultar()},error:n=>{this.toastr.error("Erro ao carregar todos os restaurantes."),console.error(n),this.spinnerService.ocultar()}}),this.toastr.info("Por favor, digite um termo ou selecione uma cidade para buscar."),this.spinnerService.ocultar())}onCityInput(t){let e=t.target.value;this.filteredCitySuggestions=this._filter(e,this.todasCidades)}onCityBlur(t){setTimeout(()=>{this.showCityDropdown=!1},120)}selectQuery(t){this.queryCtrl.setValue(t),this.showQueryDropdown=!1}getStarCount(t){return Math.round((t.mediaAvaliacao||0)/2)}selectCity(t){this.cityCtrl.setValue(t),this.showCityDropdown=!1}groupRestaurantsByCuisine(t){return Array.isArray(t)?t.reduce((e,n)=>{let i=n.tipoCozinha||"Outros";return e[i]||(e[i]=[]),e[i].push(n),e},{}):{}}formatarEndereco(t){return t?`${t.rua}, ${t.numero} - ${t.bairro}, ${t.cidade}`:"Endere\xE7o n\xE3o informado"}getCuisineTypes(){return this.groupedRestaurants?Object.keys(this.groupedRestaurants):[]}onRestaurantScroll(t,e){let n=t.target;this.checkScrollArrows(n,e)}canScrollLeft(t){return this.scrollStates[t]?.canScrollLeft||!1}canScrollRight(t){return this.scrollStates[t]?.canScrollRight||!1}checkScrollArrows(t,e){let n=t.scrollLeft>0,i=t.scrollWidth>t.clientWidth&&t.scrollLeft<t.scrollWidth-t.clientWidth-5;this.scrollStates[e]&&(this.scrollStates[e].canScrollLeft!==n||this.scrollStates[e].canScrollRight!==i)&&(this.scrollStates[e].canScrollLeft=n,this.scrollStates[e].canScrollRight=i,this.cdr.detectChanges())}scrollRestaurants(t,e){let i=this.scrollContainers.toArray().find(j=>j.nativeElement.dataset.cuisine===t);if(!i)return;let d=i.nativeElement,x=d.clientWidth*.75;e==="left"?d.scrollLeft-=x:d.scrollLeft+=x}setRestaurants(t){JSON.stringify(this.restaurants)!==JSON.stringify(t)&&(this.restaurants=t,this.groupedRestaurants=this.groupRestaurantsByCuisine(t))}navigateToRestaurante(t){this.router.navigate(["/home/agendamento-reservas-restaurante",t.id])}getImagemRestaurante(t){return t.imagens&&t.imagens.length>0&&t.imagens[0]?t.imagens[0].startsWith("/")?"http://64.181.187.11:8080"+t.imagens[0]:t.imagens[0]:"assets/jpg/restauranteOsso.jpg"}getEnderecoFormatado(t){if(!t.endereco)return"Endere\xE7o n\xE3o informado";let{rua:e,numero:n,bairro:i,cidade:d,estado:x}=t.endereco;return`${e}, ${n} - ${i}, ${d} - ${x}`}getTotalAvaliacoes(t){return t.totalDeAvaliacoes||0}static{this.\u0275fac=function(e){return new(e||r)(_(Et),_(at),_(Pt),_(St),_(ht),_(_t),_(Ct))}}static{this.\u0275cmp=k({type:r,selectors:[["app-home"]],viewQuery:function(e,n){if(e&1&&(v(Dt,5),v(Vt,5),v(Tt,5),v(qt,5)),e&2){let i;O(i=P())&&(n.searchBarHome=i.first),O(i=P())&&(n.bannerRef=i.first),O(i=P())&&(n.searchSentinel=i.first),O(i=P())&&(n.scrollContainers=i)}},decls:16,vars:5,consts:[["banner",""],["searchSentinel",""],["searchBarHome",""],["scrollContainer",""],[1,"banner"],[1,"banner-content"],[1,"banner-row"],[1,"banner-left"],[1,"search-wrapper"],[3,"citySuggestions","querySuggestions","showCityDropdown","showQueryDropdown","cityCtrl","queryCtrl","filteredCities$","filteredQueries$","search","cityInput","selectCity","selectQuery","cityBlur",4,"ngIf"],[1,"banner-right"],["src","assets/png/Pizza.png","alt","Pizza",1,"pizza-img"],["class","city-dropdown-absolute",4,"ngIf"],[1,"restaurants-section"],["class","cuisine-group",4,"ngFor","ngForOf"],[3,"search","cityInput","selectCity","selectQuery","cityBlur","citySuggestions","querySuggestions","showCityDropdown","showQueryDropdown","cityCtrl","queryCtrl","filteredCities$","filteredQueries$"],[1,"city-dropdown-absolute"],[1,"dropdown","city-dropdown"],["type","text","placeholder","Digite a cidade...","autofocus","",1,"dropdown-city-search",3,"input","formControl"],[1,"dropdown-item","brown-text","highlight",3,"mousedown"],[1,"icon","brown"],[1,"dropdown-title"],["class","dropdown-item brown-text",3,"mousedown",4,"ngFor","ngForOf"],[1,"dropdown-item","brown-text",3,"mousedown"],[1,"cuisine-group"],[1,"cuisine-header"],[1,"navigation-arrows"],["mat-icon-button","",3,"click","disabled"],[1,"scrollable-restaurants",3,"scroll"],[1,"restaurants-grid"],["class","restaurant-card",3,"routerLink",4,"ngFor","ngForOf"],[1,"restaurant-card",3,"routerLink"],[1,"restaurant-img",3,"src","alt"],[1,"restaurant-info"],[1,"restaurant-address"],[1,"restaurant-name"],[1,"restaurant-rating"],["class","star",3,"ngClass",4,"ngFor","ngForOf"],[1,"rate-number"],["class","reviews-count",4,"ngIf"],[1,"star",3,"ngClass"],[1,"reviews-count"]],template:function(e,n){e&1&&(o(0,"div",4,0)(2,"div",5)(3,"div",6)(4,"div",7)(5,"h1"),l(6,"Descubra e reserve o melhor restaurante"),a(),b(7,"div",null,1),o(9,"div",8),h(10,Lt,2,8,"app-search-bar",9),a()(),o(11,"div",10),b(12,"img",11),a()(),h(13,Wt,10,2,"div",12),a()(),o(14,"div",13),h(15,Jt,15,5,"div",14),a()),e&2&&(s(10),c("ngIf",!n.stickySearch),s(3),c("ngIf",n.showCityDropdown),s(),rt("sidebar-aberta",n.isSidebarOpen),s(),c("ngForOf",n.getCuisineTypes()))},dependencies:[E,st,z,ct,Q,$,F,A,R,q,T,V,D,B,zt,xt,ft],styles:['@charset "UTF-8";.banner[_ngcontent-%COMP%]{background:#f6bd38;border-radius:32px;margin:48px auto;max-width:96vw;min-height:420px;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 24px #00000012;overflow:hidden}.banner-content[_ngcontent-%COMP%]{width:100%;max-width:1200px;margin:0 auto}.banner-row[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:center;position:relative;gap:0}.banner-left[_ngcontent-%COMP%]{flex:1 1 0;display:flex;flex-direction:column;align-items:flex-start;justify-content:center;z-index:2;margin-top:60px;margin-left:0;margin-right:0;max-width:65%}.banner[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:2.8rem;font-weight:800;margin-bottom:38px;line-height:1.2;text-align:left;max-width:95%;margin-right:32px;word-break:break-word}.search-bar[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;width:100%}.input-group[_ngcontent-%COMP%]{display:flex;border-radius:15px;box-shadow:0 2px 8px #00000014;align-items:stretch;width:700px;max-width:5200px;min-width:380px;margin:0 0 24px;padding:0;height:56px;justify-content:space-between;position:sticky;top:24px;z-index:50;box-shadow:0 2px 12px #0000001a;background:#fff;gap:8px}.custom-field[_ngcontent-%COMP%]{flex:1 1 0;min-width:120px;max-width:220px;margin-right:8px;background:none;border:none;box-shadow:none;padding:0;display:flex;align-items:center;border-radius:0;height:100%}.custom-field[_ngcontent-%COMP%]:last-child{margin-right:0}.mat-form-field[_ngcontent-%COMP%]{width:100%;background:none}.mat-form-field-appearance-outline[_ngcontent-%COMP%]   .mat-form-field-outline[_ngcontent-%COMP%]{color:#eee}.city-input[_ngcontent-%COMP%], .long-query[_ngcontent-%COMP%]{min-width:120px;max-width:220px;font-style:italic}.icon[_ngcontent-%COMP%]{font-size:1.3rem;color:#3b221b;margin-right:6px}.brown[_ngcontent-%COMP%], .brown-text[_ngcontent-%COMP%]{color:#3b221b!important}[_ngcontent-%COMP%]::placeholder{color:#3b221b!important;opacity:.7;font-style:italic}.search-btn[_ngcontent-%COMP%]{background:#f6bd38;color:#222;font-weight:800;border:none;border-radius:15px;padding:0 22px;height:44px;margin-left:12px;margin-right:4px;font-size:1.05rem;box-shadow:0 2px 8px #0000001a;transition:background .2s,color .2s;cursor:pointer;outline:none;min-width:110px;display:flex;align-items:center;justify-content:center;align-self:center}.search-btn[_ngcontent-%COMP%]:hover, .search-btn[_ngcontent-%COMP%]:focus{background:#ffe08a;color:#222}.city-dropdown-absolute[_ngcontent-%COMP%]{position:absolute;left:50%;top:100px;transform:translate(-50%);width:340px;z-index:100;margin-left:0}.dropdown[_ngcontent-%COMP%]{background:#fff;box-shadow:0 4px 16px #0000001a;border-radius:0 0 14px 14px;z-index:20;max-height:260px;overflow-y:auto;margin-top:2px}.city-dropdown[_ngcontent-%COMP%]{padding:12px 0 8px;min-width:320px;box-shadow:0 8px 32px #00000021;border-radius:0 0 14px 14px}.dropdown-city-search[_ngcontent-%COMP%]{width:90%;margin:0 5% 10px;padding:10px 12px;border-radius:8px;border:1px solid #eee;font-size:1rem;color:#3b221b;background:#fafafa}.dropdown-title[_ngcontent-%COMP%]{font-size:.98rem;font-weight:600;color:#3b221b;padding:8px 18px 4px;opacity:.7}.highlight[_ngcontent-%COMP%]{background:#f6f6f6;font-weight:600;border-radius:8px;margin:0 8px 8px;padding:12px 18px!important;display:flex;align-items:center;gap:8px}.dropdown-item[_ngcontent-%COMP%]{padding:14px 18px;cursor:pointer;color:#3b221b;font-size:1rem;border-bottom:1px solid #f6f6f6;transition:background .15s,color .15s;display:flex;align-items:center;gap:8px;border-radius:6px}.dropdown-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.dropdown-item[_ngcontent-%COMP%]:hover{background:#f6bd38;color:#3b221b;font-weight:700}.banner-right[_ngcontent-%COMP%]{flex:0 0 420px;display:flex;align-items:center;justify-content:flex-end;height:100%;position:absolute;right:-18%;top:50%;transform:translateY(-50%);z-index:1;overflow:visible}.pizza-img[_ngcontent-%COMP%]{max-width:420px;max-height:420px;width:100%;height:auto;object-fit:contain;filter:drop-shadow(0 4px 16px rgba(0,0,0,.1));overflow:visible}@media (max-width: 1100px){.banner-row[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.banner-right[_ngcontent-%COMP%]{position:static;right:0;top:0;transform:none;margin-top:32px;justify-content:center}.pizza-img[_ngcontent-%COMP%]{margin-left:0;max-width:220px}.banner-left[_ngcontent-%COMP%]{margin-left:0;margin-top:32px;align-items:center;margin-right:0;max-width:100%}.input-group[_ngcontent-%COMP%]{width:98vw;max-width:98vw}.city-dropdown-absolute[_ngcontent-%COMP%]{position:static;margin-left:0;width:98vw;left:0;transform:none}}@media (max-width: 700px){.banner-content[_ngcontent-%COMP%]{max-width:98vw}.banner-row[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.banner-left[_ngcontent-%COMP%]{align-items:center;margin-left:0;margin-right:0;max-width:100%}.input-group[_ngcontent-%COMP%]{flex-direction:column;gap:8px}.custom-field[_ngcontent-%COMP%]{min-width:100%;max-width:100%;margin-right:0}.search-btn[_ngcontent-%COMP%]{margin-top:8px;height:48px}.pizza-img[_ngcontent-%COMP%]{max-width:180px}.banner[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem;text-align:center;margin-right:0}}.results-grid[_ngcontent-%COMP%]{margin-top:24px;display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:24px}.rest-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #00000012;padding:16px;transition:transform .2s;cursor:pointer}.rest-card[_ngcontent-%COMP%]:hover{transform:scale(1.03)}.rest-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;border-radius:8px}.rest-card[_ngcontent-%COMP%]   .tipo[_ngcontent-%COMP%]{font-size:13px;color:#da4a24;font-weight:600;margin-bottom:4px}.rest-card[_ngcontent-%COMP%]   .nome[_ngcontent-%COMP%]{font-size:18px;font-weight:700;margin-bottom:8px}.restaurants-section[_ngcontent-%COMP%]{margin:48px auto 0;max-width:1200px;padding:0 24px;transition:max-width .3s ease,padding .3s ease}.restaurants-section.sidebar-aberta[_ngcontent-%COMP%]{max-width:928px;padding:0 16px;margin-left:auto;margin-right:auto}.restaurants-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#3b221b;margin-bottom:24px}.restaurant-card[_ngcontent-%COMP%]{background:#fff;border-radius:18px;box-shadow:0 2px 8px #00000014;overflow:hidden;display:flex;flex-direction:column;align-items:stretch;transition:box-shadow .2s,transform .2s;cursor:pointer}.restaurant-card[_ngcontent-%COMP%]:hover{box-shadow:0 8px 24px #00000021;transform:translateY(-2px) scale(1.01)}.restaurant-img[_ngcontent-%COMP%]{width:100%;height:160px;object-fit:cover;border-radius:18px 18px 0 0}.restaurant-info[_ngcontent-%COMP%]{padding:18px 18px 14px;display:flex;flex-direction:column;gap:6px}.restaurant-type[_ngcontent-%COMP%]{font-size:.95rem;color:#da4a24;font-weight:600;margin-bottom:2px}.restaurant-name[_ngcontent-%COMP%]{font-size:1.18rem;font-weight:700;color:#3b221b;margin-bottom:6px}.restaurant-rating[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.star[_ngcontent-%COMP%]{font-size:1.1rem;color:#e0e0e0}.star.filled[_ngcontent-%COMP%]{color:#f6bd38}.rate-number[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#3b221b;margin-left:6px}.restaurant-address[_ngcontent-%COMP%]{font-size:.9rem;color:#555;margin-bottom:4px}.see-more-container[_ngcontent-%COMP%]{text-align:center;margin-top:16px}.see-more-button[_ngcontent-%COMP%]{color:#da4a24}.see-more-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.1rem}.cuisine-group[_ngcontent-%COMP%]{margin-bottom:32px}.cuisine-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.cuisine-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#3b221b;margin:0}.cuisine-header[_ngcontent-%COMP%]   .navigation-arrows[_ngcontent-%COMP%]{display:flex;gap:8px}.cuisine-header[_ngcontent-%COMP%]   .navigation-arrows[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;background-color:#fff;border:1px solid #e0e0e0;color:#3b221b;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 5px #0000001a}.cuisine-header[_ngcontent-%COMP%]   .navigation-arrows[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#f5f5f5;border-color:#f6bd38;color:#f6bd38}.cuisine-header[_ngcontent-%COMP%]   .navigation-arrows[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed;box-shadow:none}.cuisine-header[_ngcontent-%COMP%]   .navigation-arrows[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px}.scrollable-restaurants[_ngcontent-%COMP%]{overflow-x:auto;padding-bottom:20px;-webkit-overflow-scrolling:touch;scrollbar-width:none;-ms-overflow-style:none;scroll-behavior:smooth}.scrollable-restaurants[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.scrollable-restaurants[_ngcontent-%COMP%]   .restaurants-grid[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;gap:24px}.scrollable-restaurants[_ngcontent-%COMP%]   .restaurants-grid[_ngcontent-%COMP%]   .restaurant-card[_ngcontent-%COMP%]{flex:0 0 calc((100% - 72px)/4);max-width:calc((100% - 72px)/4);min-width:260px}.restaurants-section.sidebar-aberta[_ngcontent-%COMP%]   .scrollable-restaurants[_ngcontent-%COMP%]   .restaurants-grid[_ngcontent-%COMP%]   .restaurant-card[_ngcontent-%COMP%]{flex:0 0 calc((100% - 48px) / 3);max-width:calc((100% - 48px) / 3);min-width:250px}@media (max-width: 900px){.restaurants-section[_ngcontent-%COMP%], .restaurants-section.sidebar-aberta[_ngcontent-%COMP%]{padding:0 8px}.scrollable-restaurants[_ngcontent-%COMP%]   .restaurants-grid[_ngcontent-%COMP%]{gap:18px}.scrollable-restaurants[_ngcontent-%COMP%]   .restaurants-grid[_ngcontent-%COMP%]   .restaurant-card[_ngcontent-%COMP%]{flex:0 0 calc((100% - 18px)/2);max-width:calc((100% - 18px)/2);min-width:200px}.restaurants-section.sidebar-aberta[_ngcontent-%COMP%]   .scrollable-restaurants[_ngcontent-%COMP%]   .restaurants-grid[_ngcontent-%COMP%]   .restaurant-card[_ngcontent-%COMP%]{flex:0 0 calc((100% - 18px)/2);max-width:calc((100% - 18px)/2)}}@media (max-width: 700px){.scrollable-restaurants[_ngcontent-%COMP%]   .restaurants-grid[_ngcontent-%COMP%]   .restaurant-card[_ngcontent-%COMP%], .restaurants-section.sidebar-aberta[_ngcontent-%COMP%]   .scrollable-restaurants[_ngcontent-%COMP%]   .restaurants-grid[_ngcontent-%COMP%]   .restaurant-card[_ngcontent-%COMP%]{flex:0 0 100%;max-width:100%}}']})}}return r})();export{Et as a,zt as b,Ee as c};
