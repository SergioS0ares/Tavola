import{a as N}from"./chunk-SIRZEGXB.js";import{a as D}from"./chunk-UCSHVYJ6.js";import{e as T}from"./chunk-PHAKSYZK.js";import{a as I}from"./chunk-RKU5BQ3S.js";import{a as z}from"./chunk-E2WZTPBL.js";import{f as $}from"./chunk-MJD3AUS3.js";import{b as A,c as B,e as q,i as V,k as G,n as R,o as U,p as j,q as W}from"./chunk-Q7PZSYDJ.js";import{M as w,O as _,Q as v,R as E,T as y,V as b,X as F,_ as S,ba as L,ia as k,m as P,r as O}from"./chunk-KZ2VZQWD.js";import"./chunk-FHD2U5CN.js";import{Bc as r,Db as C,Jb as f,Kc as M,Rb as a,cc as n,dc as e,ec as h,na as p,oc as u,qb as l}from"./chunk-ZBUSQTZT.js";function H(o,g){o&1&&(n(0,"mat-error"),r(1," Insira um email v\xE1lido com um dom\xEDnio (ex: .com) "),e())}function J(o,g){o&1&&(n(0,"mat-error"),r(1," Email inv\xE1lido "),e())}function K(o,g){o&1&&(n(0,"mat-error"),r(1," Este campo \xE9 obrigat\xF3rio "),e())}function Q(o,g){o&1&&(n(0,"mat-error"),r(1," Este campo \xE9 obrigat\xF3rio "),e())}function X(o,g){o&1&&(n(0,"span",13),r(1,"Funcionalidade ainda n\xE3o implementada."),e())}function Y(o,g){o&1&&(n(0,"div",14)(1,"mat-icon"),r(2,"error"),e(),r(3," N\xE3o foi poss\xEDvel acessar sua conta. Verifique seu e-mail e senha e tente novamente. "),e())}var bt=(()=>{class o{constructor(){this.showForgotInfo=!1,this.showLoginError=!1,this.router=p(T),this.loginService=p(D),this.toastService=p(z),this.authService=p(I),this.loginForm=new y({email:new b("",{nonNullable:!0,validators:[_.required,_.email]}),senha:new b("",{nonNullable:!0,validators:[_.required]})})}emailWithTLDValidator(d){let i=d.value;return i&&!/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/.test(i)?{emailTLD:!0}:null}submit(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched();return}let d=this.loginForm.get("email")?.value,i=this.loginForm.get("senha")?.value;d&&i?this.loginService.login(d,i).subscribe({next:t=>{this.showLoginError=!1,this.toastService.success("Login feito com sucesso!"),t.tipoUsuario==="RESTAURANTE"?(this.authService.setAuthData(t.token,t.nome,t.tipoUsuario,t.id,t.imagem),this.router.navigate(["reserva"])):this.router.navigate(["home"])},error:t=>{this.showLoginError=!0;let m=t.error?.message||"N\xE3o foi poss\xEDvel acessar sua conta. Verifique seu e-mail e senha e tente novamente.";this.toastService.error(m)}}):(this.showLoginError=!0,this.toastService.error("Email ou senha inv\xE1lidos."))}navigate(){this.router.navigate(["signup"])}forgotPassword(){this.showForgotInfo=!0,this.toastService.info("Funcionalidade de recupera\xE7\xE3o de senha ainda n\xE3o implementada.")}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=C({type:o,selectors:[["app-login"]],features:[M([])],decls:26,vars:8,consts:[["title","Acesse a sua conta","primaryBtnText","Entrar","secondaryBtnText","N\xE3o tem uma conta? Cadastra-se",3,"submit","navigate","disablePrimaryBtn"],[1,"form-section"],[1,"login-form",3,"ngSubmit","formGroup"],["appearance","outline",1,"largura-total"],["matPrefix",""],[1,"input-icon"],["matInput","","placeholder","Seu e-mail","formControlName","email","type","email"],[4,"ngIf"],["matInput","","placeholder","Sua senha","formControlName","senha","type","password"],[1,"forgot-password"],["href","#",3,"click"],["class","not-ready",4,"ngIf"],["class","login-error-card",4,"ngIf"],[1,"not-ready"],[1,"login-error-card"]],template:function(i,t){if(i&1&&(n(0,"app-default-login-layout",0),u("submit",function(){return t.submit()})("navigate",function(){return t.navigate()}),n(1,"div",1)(2,"form",2),u("ngSubmit",function(){return t.submit()}),n(3,"mat-form-field",3)(4,"mat-label"),r(5,"E-mail"),e(),n(6,"span",4)(7,"mat-icon",5),r(8,"email"),e()(),h(9,"input",6),f(10,H,2,0,"mat-error",7)(11,J,2,0,"mat-error",7)(12,K,2,0,"mat-error",7),e(),n(13,"mat-form-field",3)(14,"mat-label"),r(15,"Senha"),e(),n(16,"span",4)(17,"mat-icon",5),r(18,"lock"),e()(),h(19,"input",8),f(20,Q,2,0,"mat-error",7),e(),n(21,"div",9)(22,"a",10),u("click",function(c){return t.forgotPassword(),c.preventDefault()}),r(23,"Esqueci minha senha"),e(),f(24,X,2,0,"span",11),e(),f(25,Y,4,0,"div",12),e()()()),i&2){let m,c,s,x;a("disablePrimaryBtn",!t.loginForm.valid),l(2),a("formGroup",t.loginForm),l(8),a("ngIf",(m=t.loginForm.get("email"))==null?null:m.hasError("emailTLD")),l(),a("ngIf",((c=t.loginForm.get("email"))==null?null:c.hasError("email"))&&!((c=t.loginForm.get("email"))!=null&&c.hasError("emailTLD"))),l(),a("ngIf",((s=t.loginForm.get("email"))==null?null:s.hasError("required"))&&!((s=t.loginForm.get("email"))!=null&&s.hasError("emailTLD"))&&!((s=t.loginForm.get("email"))!=null&&s.hasError("email"))),l(8),a("ngIf",(x=t.loginForm.get("senha"))==null?null:x.hasError("required")),l(4),a("ngIf",t.showForgotInfo),l(),a("ngIf",t.showLoginError)}},dependencies:[O,P,N,k,F,w,v,E,S,L,G,V,A,B,q,U,R,W,j,$],styles:[".form-section[_ngcontent-%COMP%]{background:#ffffff0d;border-radius:8px;padding:32px;margin:0 auto;width:100%;max-width:500px}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;width:100%;margin:0 auto}.login-form[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper{width:100%;z-index:0}.login-form[_ngcontent-%COMP%]     .mat-mdc-form-field{width:100%}.signup-tabs[_ngcontent-%COMP%]{margin-top:-24px}.signup-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-header{margin-bottom:24px;border-bottom:1px solid rgba(255,255,255,.12)}.signup-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-header .mat-mdc-tab{color:#fff9;min-height:48px}.signup-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-header .mat-mdc-tab.mdc-tab--active{color:#f6bd38}.signup-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-header .mat-mdc-tab .mdc-tab-indicator__content--underline{border-color:#f6bd38}.signup-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-body-wrapper{height:calc(100vh - 250px);overflow-y:auto}.signup-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-body-wrapper::-webkit-scrollbar{width:8px}.signup-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-body-wrapper::-webkit-scrollbar-track{background:#1d57c41a;border-radius:4px}.signup-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-body-wrapper::-webkit-scrollbar-thumb{background:#12741f33;border-radius:4px}.signup-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-body-wrapper::-webkit-scrollbar-thumb:hover{background:#10d34a4d}.signup-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:32px;padding:0 16px;max-width:800px;margin:0 auto}.signup-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]{background:#ffffff0d;border-radius:8px;padding:24px;margin-bottom:16px}.signup-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{color:#f6bd38;font-size:18px;font-weight:600;margin-bottom:24px;text-transform:uppercase;letter-spacing:.5px;border-left:4px solid #F6BD38;padding-left:12px}.signup-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{margin-bottom:16px}.signup-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-row.two-columns[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.signup-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.signup-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-row.full-width[_ngcontent-%COMP%]{grid-column:1/-1}mat-form-field.largura-total[_ngcontent-%COMP%], .login-form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;min-width:200px}  .mat-mdc-form-field{width:100%}  .mat-mdc-form-field .mat-mdc-input-element,   .mat-mdc-form-field .mat-mdc-select-value-text,   .mat-mdc-form-field .mdc-floating-label,   .mat-mdc-form-field .mat-mdc-select-arrow{color:#fff!important}  .mat-mdc-form-field .mat-mdc-input-element:hover,   .mat-mdc-form-field .mat-mdc-input-element:focus{color:#fff!important}  .mat-mdc-form-field .mdc-text-field--outlined{--mdc-outlined-text-field-label-text-color: rgba(255, 255, 255, .6);--mdc-outlined-text-field-outline-color: rgba(255, 255, 255, .3);--mdc-outlined-text-field-hover-outline-color: #F6BD38;--mdc-outlined-text-field-focus-outline-color: #F6BD38}  .mat-mdc-form-field .mdc-text-field--focused:not(.mdc-text-field--disabled) .mdc-floating-label{color:#f6bd38!important}  .mat-mdc-form-field textarea{min-height:100px}mat-error[_ngcontent-%COMP%]{color:#d1495b!important;font-size:.8rem;font-weight:500;opacity:1!important}.mat-mdc-form-field-error[_ngcontent-%COMP%]{color:#d1495b!important}.input-icon[_ngcontent-%COMP%]{margin-left:8px;margin-right:8px;width:24px;height:24px;color:#fff}.forgot-password[_ngcontent-%COMP%]{margin-top:8px;text-align:right}.forgot-password[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#f6bd38;text-decoration:none;font-size:14px}.forgot-password[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.forgot-password[_ngcontent-%COMP%]   .not-ready[_ngcontent-%COMP%]{display:block;color:#d1495b;font-size:13px;margin-top:4px}.horarios-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.horarios-grid[_ngcontent-%COMP%]   .horario-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.horarios-grid[_ngcontent-%COMP%]   .horario-row[_ngcontent-%COMP%]   .dia-semana[_ngcontent-%COMP%]{min-width:120px;color:#fff}.horarios-grid[_ngcontent-%COMP%]   .horario-row[_ngcontent-%COMP%]   .horarios-inputs[_ngcontent-%COMP%]{display:flex;gap:16px;flex:1}@media (max-width: 768px){.signup-form[_ngcontent-%COMP%]{padding:0}.signup-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]{padding:16px}.signup-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-row.two-columns[_ngcontent-%COMP%]{grid-template-columns:1fr}.horarios-grid[_ngcontent-%COMP%]   .horario-row[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.horarios-grid[_ngcontent-%COMP%]   .horario-row[_ngcontent-%COMP%]   .dia-semana[_ngcontent-%COMP%]{min-width:auto}.horarios-grid[_ngcontent-%COMP%]   .horario-row[_ngcontent-%COMP%]   .horarios-inputs[_ngcontent-%COMP%]{width:100%}}@media (max-width: 600px){.login-form[_ngcontent-%COMP%]{max-width:100%;padding:0 8px}}.signup-link[_ngcontent-%COMP%]{margin-top:16px;text-align:center}.signup-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#da4a24;text-decoration:none;font-weight:500}.signup-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.login-error-card[_ngcontent-%COMP%]{background:#d1495b;color:#fff;border-radius:8px;padding:18px 24px;margin:18px auto 0;max-width:500px;display:flex;align-items:center;gap:12px;font-size:1.1rem;font-weight:600;box-shadow:0 2px 8px #d1495b14}.login-error-card[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff;font-size:2rem}.btn-primary[_ngcontent-%COMP%]{width:100%;padding:12px;border-radius:8px;font-size:16px;font-weight:500;border:none;cursor:pointer;background-color:#f6bd38;color:#3b221b;transition:all .3s ease;margin-top:16px}.btn-primary[_ngcontent-%COMP%]:disabled{background-color:#f6bd3880;cursor:not-allowed}"]})}}return o})();export{bt as LoginComponent};
