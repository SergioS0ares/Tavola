import{ha as l}from"./chunk-ZBUSQTZT.js";var r=(()=>{class i{constructor(){this.TOKEN_KEY="token",this.USER_NAME_KEY="nome",this.USER_TYPE_KEY="tipoUsuario",this.RESTAURANTE_ID_KEY="idRestaurante",this.USER_IMAGE_KEY="imagemUsuario",this._token=null,this._perfil=null,this.BASE_IMAGE_URL="http://64.181.187.11:8080",this._token=localStorage.getItem(this.TOKEN_KEY);let t=localStorage.getItem(this.USER_NAME_KEY),e=localStorage.getItem(this.USER_TYPE_KEY),o=localStorage.getItem(this.RESTAURANTE_ID_KEY)||void 0,E=localStorage.getItem(this.USER_IMAGE_KEY)||void 0;t&&e&&(this._perfil={nome:t,tipo:e,id:o,imagem:E}),console.log("[AuthService] Constructor - perfil inicial:",this._perfil)}setAuthData(t,e,o,E,s){this.setToken(t),this.setPerfil({nome:e,tipo:o,id:E,imagem:s}),localStorage.setItem(this.TOKEN_KEY,t),localStorage.setItem(this.USER_NAME_KEY,e),localStorage.setItem(this.USER_TYPE_KEY,o),E&&o==="RESTAURANTE"&&localStorage.setItem(this.RESTAURANTE_ID_KEY,E),s?localStorage.setItem(this.USER_IMAGE_KEY,s):localStorage.removeItem(this.USER_IMAGE_KEY)}setToken(t){this._token=t,localStorage.setItem(this.TOKEN_KEY,t)}getToken(){return localStorage.getItem(this.TOKEN_KEY)}setPerfil(t){this._perfil=t,localStorage.setItem(this.USER_NAME_KEY,t.nome),localStorage.setItem(this.USER_TYPE_KEY,t.tipo),t.tipo==="RESTAURANTE"&&t.id&&localStorage.setItem(this.RESTAURANTE_ID_KEY,t.id),t.imagem?localStorage.setItem(this.USER_IMAGE_KEY,t.imagem):localStorage.removeItem(this.USER_IMAGE_KEY)}get perfil(){if(this._perfil)return this._perfil;let t=localStorage.getItem(this.USER_NAME_KEY),e=localStorage.getItem(this.USER_TYPE_KEY),o=localStorage.getItem(this.RESTAURANTE_ID_KEY)||void 0,E=localStorage.getItem(this.USER_IMAGE_KEY)||void 0;return t&&e&&this.getToken()?(this._perfil={nome:t,tipo:e,id:o,imagem:E},this._perfil):null}clearAuthData(){this._token=null,this._perfil=null,localStorage.removeItem(this.TOKEN_KEY),localStorage.removeItem(this.USER_NAME_KEY),localStorage.removeItem(this.USER_TYPE_KEY),localStorage.removeItem(this.RESTAURANTE_ID_KEY),localStorage.removeItem(this.USER_IMAGE_KEY)}hasRole(t){return this.perfil?.tipo===t}getAbsoluteImageUrl(t){return t?`${this.BASE_IMAGE_URL}${t}`:""}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();export{r as a};
