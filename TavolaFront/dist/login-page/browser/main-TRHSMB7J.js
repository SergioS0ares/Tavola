import{a as ce}from"./chunk-POXZIMSZ.js";import{a as R}from"./chunk-UCSHVYJ6.js";import{a as ge,i as we,j as ze}from"./chunk-Q5BXAAD2.js";import{a as T,b as je}from"./chunk-6WEI4AZC.js";import"./chunk-JTLFICOJ.js";import"./chunk-KXNGRLJA.js";import{d as de,e as A,h as he}from"./chunk-PHAKSYZK.js";import{a as ue}from"./chunk-WFOMECZW.js";import{a as m}from"./chunk-RKU5BQ3S.js";import{b as fe}from"./chunk-E2WZTPBL.js";import{c as _e}from"./chunk-KZMTOMUG.js";import"./chunk-D6YBNCGW.js";import{$ as N,Da as ke,Ka as Pe,La as De,O as ve,P as Ce,Q as ye,Qa as _,R as Ae,S as Re,T as Te,V as S,W as Se,X as Ie,Y as I,_ as E,a as y,aa as F,ba as Ee,da as Ne,ea as Fe,fa as Oe,ga as O,ia as Me,ka as M,za as be}from"./chunk-WQ2XOSUX.js";import"./chunk-XXZ5FPPI.js";import"./chunk-WI5BEHMP.js";import"./chunk-6UV37W3K.js";import{C as le,E as v,F as C,G as pe,H as me,a as ne,t as g,v as ae,w as se}from"./chunk-KZ2VZQWD.js";import"./chunk-FHD2U5CN.js";import{Db as oe,Fa as J,Ia as K,J as G,L as d,La as Q,P as W,S as Y,Vc as f,Wa as q,Za as ee,a as x,aa as P,b as B,ec as ie,fa as Z,ha as p,ka as $,m as U,ma as s,na as h,q as k,ra as X,sa as u,u as w,ub as te,v as j,xb as re,y as V}from"./chunk-ZBUSQTZT.js";var He=(()=>{class t{constructor(){this.title="login-page"}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=oe({type:t,selectors:[["app-root"]],decls:2,vars:0,template:function(r,i){r&1&&ie(0,"router-outlet")(1,"app-global-spinner")},dependencies:[de,ue],encapsulation:2})}}return t})();var b=(()=>{class t{constructor(e,r,i){this.auth=e,this.loginService=r,this.router=i,this.isRefreshing=!1,this.refreshTokenSubject=new U(null)}intercept(e,r){let i=e.url.startsWith("http://64.181.187.11:8080"),n=this.auth.getToken(),a=i?e.clone({setHeaders:n?{Authorization:`Bearer ${n}`}:{},withCredentials:!0}):e.clone({withCredentials:!1});return r.handle(a).pipe(d(l=>l instanceof le?l.status===401&&e.url.endsWith("/auth/refresh")?(this.auth.clearAuthData(),this.router.navigate(["/login"]),k):l.status===401?this.handle401Error(a,r):j(()=>l):j(()=>l)))}handle401Error(e,r){return this.isRefreshing?this.refreshTokenSubject.pipe(G(i=>i!=null),W(1),P(i=>{let n=e.clone({setHeaders:{Authorization:`Bearer ${i}`},withCredentials:!0});return r.handle(n)})):(this.isRefreshing=!0,this.refreshTokenSubject.next(null),this.loginService.refreshToken().pipe(P(i=>{this.refreshTokenSubject.next(i.token);let n=e.clone({setHeaders:{Authorization:`Bearer ${i.token}`},withCredentials:!0});return r.handle(n)}),d(i=>(this.auth.clearAuthData(),this.router.navigate(["/login"]),k)),Y(()=>{this.isRefreshing=!1})))}static{this.\u0275fac=function(r){return new(r||t)(s(m),s(R),s(A))}}static{this.\u0275prov=p({token:t,factory:t.\u0275fac})}}return t})();var z=(()=>{class t{constructor(e,r,i){this.router=e,this.auth=r,this.loginService=i}canActivate(e,r){return this.auth.getToken()?w(!0):this.loginService.refreshToken().pipe(V(n=>(this.auth.setToken(n.token),!0)),d(()=>w(this.router.createUrlTree(["/login"]))))}static{this.\u0275fac=function(r){return new(r||t)(s(A),s(m),s(R))}}static{this.\u0275prov=p({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var c=t=>{let o=h(m);return t.data.roles.includes(o.perfil?.tipo??"")};var Le=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",loadComponent:()=>import("./chunk-MDYATXMY.js").then(t=>t.LoginComponent)},{path:"signup",loadComponent:()=>import("./chunk-AZ7274BH.js").then(t=>t.SignUpComponent)},{path:"",loadComponent:()=>import("./chunk-7PZDSGI7.js").then(t=>t.LayoutPrincipalComponent),canActivate:[z],children:[{path:"home",children:[{path:"",loadComponent:()=>import("./chunk-F7IIWPZA.js").then(t=>t.HomeComponent),canActivate:[c],data:{roles:["CLIENTE"]}},{path:"agendamento-reservas-restaurante/:id",loadComponent:()=>import("./chunk-UK6UTZ3P.js").then(t=>t.AgendamentoReservasRestauranteComponent)}]},{path:"meu-restaurante",loadComponent:()=>import("./chunk-KT4UOL62.js").then(t=>t.MeuRestauranteComponent),canActivate:[c],data:{roles:["RESTAURANTE"]}},{path:"cadastro-cardapio",loadComponent:()=>import("./chunk-YGSOF6KJ.js").then(t=>t.CadastroCardapioComponent),canActivate:[c],data:{roles:["RESTAURANTE"]}},{path:"reserva",loadComponent:()=>import("./chunk-R4MW5JN5.js").then(t=>t.ReservasComponent),canActivate:[c],data:{roles:["RESTAURANTE"]}},{path:"historico",loadComponent:()=>import("./chunk-O4WGAQFE.js").then(t=>t.HistoricoReservasComponent),canActivate:[c],data:{roles:["CLIENTE"]}},{path:"configuracoes",loadComponent:()=>import("./chunk-APVHNV4F.js").then(t=>t.ConfiguracoesComponent),canActivate:[z]},{path:"",redirectTo:"home",pathMatch:"full"}]},{path:"**",redirectTo:"login"}];var Ve="@",Ge=(()=>{class t{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=null;injector=h(J);loadingSchedulerFn=h(We,{optional:!0});_engine;constructor(e,r,i,n,a){this.doc=e,this.delegate=r,this.zone=i,this.animationType=n,this.moduleImpl=a}ngOnDestroy(){this._engine?.flush()}loadImpl(){let e=()=>this.moduleImpl??import("./chunk-IB4RC2X2.js").then(i=>i),r;return this.loadingSchedulerFn?r=this.loadingSchedulerFn(e):r=e(),r.catch(i=>{throw new Z(5300,!1)}).then(({\u0275createEngine:i,\u0275AnimationRendererFactory:n})=>{this._engine=i(this.animationType,this.doc);let a=new n(this.delegate,this._engine,this.zone);return this.delegate=a,a})}createRenderer(e,r){let i=this.delegate.createRenderer(e,r);if(i.\u0275type===0)return i;typeof i.throwOnSyntheticProps=="boolean"&&(i.throwOnSyntheticProps=!1);let n=new H(i);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let l=a.createRenderer(e,r);n.use(l),this.scheduler??=this.injector.get(K,null,{optional:!0}),this.scheduler?.notify(10)}).catch(a=>{n.use(i)}),n}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}componentReplaced(e){this._engine?.flush(),this.delegate.componentReplaced?.(e)}static \u0275fac=function(r){re()};static \u0275prov=p({token:t,factory:t.\u0275fac})}return t})(),H=class{delegate;replay=[];\u0275type=1;constructor(o){this.delegate=o}use(o){if(this.delegate=o,this.replay!==null){for(let e of this.replay)e(o);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(o,e){return this.delegate.createElement(o,e)}createComment(o){return this.delegate.createComment(o)}createText(o){return this.delegate.createText(o)}get destroyNode(){return this.delegate.destroyNode}appendChild(o,e){this.delegate.appendChild(o,e)}insertBefore(o,e,r,i){this.delegate.insertBefore(o,e,r,i)}removeChild(o,e,r){this.delegate.removeChild(o,e,r)}selectRootElement(o,e){return this.delegate.selectRootElement(o,e)}parentNode(o){return this.delegate.parentNode(o)}nextSibling(o){return this.delegate.nextSibling(o)}setAttribute(o,e,r,i){this.delegate.setAttribute(o,e,r,i)}removeAttribute(o,e,r){this.delegate.removeAttribute(o,e,r)}addClass(o,e){this.delegate.addClass(o,e)}removeClass(o,e){this.delegate.removeClass(o,e)}setStyle(o,e,r,i){this.delegate.setStyle(o,e,r,i)}removeStyle(o,e,r){this.delegate.removeStyle(o,e,r)}setProperty(o,e,r){this.shouldReplay(e)&&this.replay.push(i=>i.setProperty(o,e,r)),this.delegate.setProperty(o,e,r)}setValue(o,e){this.delegate.setValue(o,e)}listen(o,e,r,i){return this.shouldReplay(e)&&this.replay.push(n=>n.listen(o,e,r,i)),this.delegate.listen(o,e,r,i)}shouldReplay(o){return this.replay!==null&&o.startsWith(Ve)}},We=new $("");function xe(t="animations"){return ee("NgAsyncAnimations"),X([{provide:te,useFactory:(o,e,r)=>new Ge(o,e,r,t),deps:[ne,ae,Q]},{provide:q,useValue:t==="noop"?"NoopAnimations":"BrowserAnimations"}])}g(T);var Ye=[Ce,F,S,I,N,E,Ee,Ne,ve,Ae,O,Re,Se,Ie,Te,ye],L={providers:[he(Le),y(),fe(),C(me()),xe(),{provide:v,useClass:b,multi:!0},{provide:f,useValue:"pt-BR"},De(_),u(M.forRoot(Ye))]};g(T);var Ze=[F,S,I,N,E,Fe,Oe,O];se(He,B(x({},L),{providers:[u(M,we,ge,_e,ke,je,ze,be),{provide:Me,useValue:Ze},{provide:f,useValue:"pt"},{provide:Pe,useValue:_},C(pe()),{provide:v,useClass:b,multi:!0},...L.providers||[],ce(),y()]})).catch(t=>console.error(t));
